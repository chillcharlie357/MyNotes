---
aliases: 
tags: 
categories:
sticky:
thumbnail:
cover: 
excerpt: false
mathjax: true
comment: true
title: 11-板级⽀持包与系统引导
date:  Monday,December 11th 2023
modified:  Monday,December 11th 2023
---

# 嵌入式软件运行流程

![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2023%2F12%2F11%2F11-12-18-b12ba719b54db440addbddae94a781e9-20231211111216-ee692f.png)

# 版级支持包 BSP

BSP全称“板级支持包”（Board Support Packages），说的简单 一点，就是一段启动代码，和计算机主板的BIOS差不多，但提供的功 能区别就相差很大。

## BSP与BIOS/UEFI的区别

- BIOS主要是负责在电脑开启时检测、初始化系统设备（设置栈指针， 中断分配，内存初始化..）、装入操作系统并调度操作系统向硬件发出 的指令。 UEFI,“统一的可扩展固件接口”, 旨在代替BIOS, 提高软 件互操作性和解决BIOS的局限性
- BSP是自定义的可修改的，BIOS用户无法修改
- BSP和操作系统绑在一起运行，包含和系统相关的基本驱动
	- 设备驱动



## 初始化过程

1. 片级初始化
	- 完成CPU的初始化
	- 纯硬件过程
2. 板级初始化
	- 完成CPU之外的硬件初始化
	- 设置某些软件的数据结构和参数
	- 包含软硬件的初始化
3. 系统级的初始化
	- 以软件初始化为主，主要进行操作系统的初始化
	- BSP将控制转交给操作系统，由操作系统进行余下的初始化操作：
		-  包括加载和初始化与硬件无关的设备驱动程序
		- 建立系统内存区
		- 加载并初始化其他系统软件模块（如网络系统、文件系统等
	- 最后，操作系统创建应用程序环境并将控制转交给应用程序的入口


# BootLoader

## RTOS引导模式

1. 不需要BootLoader引导模式：**时间效率高**，**系统快速启动**，直接在NOR flash或ROM系列非易失性存储介质中运行，但**不满足运行速度的要求**
	- 没有数据搬迁工作
	- 但运行速度没有RAM高
2. 需要BootLoader引导模式：**节省空间**，牺牲时间，适用于**硬件成本低，运行速度快**，但**启动速度相对慢**
	- 需要把内核从外存复制到RAM中，可能还有解压的过程

## BootLoader

- 嵌入式系统的**OS启动加载程序**
- 引导加载程序
	- 包括固化在固件(firmware)中的 boot 代码(可选)，和 Boot Loader两大部分
	- 是**系统加电后**运行的第一段软件代码
- 相对于操作系统内核来说，它是一个硬件抽象层

