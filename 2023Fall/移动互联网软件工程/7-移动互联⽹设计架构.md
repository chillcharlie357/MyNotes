![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2023%2F11%2F06%2Fd0e95309dfc2efb977b70daf28ee6a5d_20231106212300.png)

# 高可用

## 负载均衡


- 算法
	- • round-robin
		- • ⼀种轮询选择的⽅法是把所有的节点看做⼀个⼀个的点，并把这些点连起来组成⼀个圆， 轮询选择就是在这个圆上按顺时针选择⼀个点。
	- • 带权重的轮询选择 (Weighted Round Robin)
	- • ip_hash
		- • 同IP同服务器

## 反向代理

proxy cache 提供缓存来减少服务器的压⼒
location 配置

![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2023%2F11%2F10%2F6fbfd8f822b3dbf562042ff4b178a844_20231110151131.png)

## 隔离

环境隔离
压测隔离
缓存隔离
查询隔离

## 限流

- 令牌桶
	- 固定容量token的桶，按照固定速率往桶里添加令牌
- 漏桶
	- Traffic shaping
	- Traffic policing
	- 固定速率流出
- 计数器


### 分布式限流

Redis + Lua
Nginx + Lua


### 接入层限流

请求流量的⼊⼝
Nginx接⼊层限流可以使⽤Nginx⾃带的模块


## 降级

按日志级别、按是否自动化

- 按功能
	- ⻚⾯降级、⻚⾯⽚段降级、⻚⾯异步请求降级、服务功能降级、读降级、写降级、爬⾍降级、⻛控降级
- 按处于系统层次
	- ⻚⾯JS、接⼊层、应⽤层

# 高并发

缓存