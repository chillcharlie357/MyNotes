---
aliases: 
tags:
  - 2023_Fall_æœåŠ¡ç«¯å¼€å‘
  - è¯¾ç¨‹
categories: 2023_Fall_æœåŠ¡ç«¯å¼€å‘
sticky:
thumbnail:
cover: 
excerpt: false
mathjax: true
comment: true
title: 1-ä¾èµ–æ³¨å…¥
date:  2023-10-10 18:10
modified:  2023-12-31 10:12
---

Gitï¼šåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶  
Beam:javaä¸­ä¸€ä¸ªå¯¹è±¡ï¼ŒSpringè´Ÿè´£å¯¹è±¡åˆ›å»ºã€ç®¡ç†è¿™äº›å¯¹è±¡

![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2023%2F09%2F07%2F27a33f228b702e3362eab03541d8c21e_20230907191141.png)

å•†å“æœåŠ¡éœ€è¦å¼•ç”¨åº“å­˜æœåŠ¡ï¼ˆä¾èµ–ï¼‰ï¼Œå¦‚ä½•çŸ¥é“åº“å­˜æœåŠ¡çš„åœ°å€/å¼•ç”¨ï¼Ÿ

# 1. Springæ ¸å¿ƒæŠ€æœ¯

1. DIï¼ˆDependency Injectionï¼‰
   - ä¿ç•™æŠ½è±¡æ¥å£ï¼Œè®©ç»„ä»¶ï¼ˆComponentï¼‰ä¾èµ–äºæŠ½è±¡æ¥å£ï¼Œå½“ç»„ä»¶è¦ä¸å…¶ä»–å®é™…çš„å¯¹è±¡å‘ç”Ÿä¾èµ–å…³ç³»æ—¶ï¼Œ**ç”±æŠ½è±¡æ¥å£æ¥æ³¨å…¥ä¾èµ–çš„å®é™…å¯¹è±¡**
2. AOPï¼ˆAspect Oriented Programmingï¼‰
   - é€šè¿‡**é¢„ç¼–è¯‘æ–¹å¼**å’Œ**è¿è¡ŒæœŸé—´åŠ¨æ€ä»£ç†**å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯
   - åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œ ä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘æ•ˆç‡

# 2. å¸¸ç”¨æ³¨è§£

## 2.1. Bean

==Object=Bean=Component==

- `@Component`
	- æ™®é€šçš„Javaç±»åŠ `@Component`æ³¨è§£ï¼ŒSpringä¼š**å®ä¾‹åŒ–**è¿™ä¸ªç±»
	- Component valueå±æ€§ï¼ŒæŒ‡å®šBean Idï¼Œé»˜è®¤ä¸ºç±»å
- `@Autowired`
	- **è‡ªåŠ¨æ³¨å…¥**ï¼ŒSpringä»ä»å®¹å™¨çš„ä¸Šä¸‹æ–‡æ‰¾å®ç°äº†æŸä¸ªæ¥å£çš„å¯¹è±¡
	- æ‰¾ä¸åˆ°å¯¹è±¡ï¼Œæ³¨å…¥å¤±è´¥
	- æ‰¾åˆ°å¤šä¸ªå®ç°äº†è¿™ä¸ªæ¥å£çš„å¯¹è±¡ï¼Œä¹Ÿä¼šæŠ¥é”™

- è‡ªåŠ¨è£…é…æ—¶æ­§ä¹‰ï¼šå¦‚ä½•è§£å†³Beanå†²çª?
	- `@Qualifier`è‡ªå®šä¹‰é™å®šç¬¦
	- `@Primary`åœ¨Beanä¸Šæ”¾æŒ‡å®š
	- è‡ªå®šä¹‰æ³¨è§£

@Profileéœ€è¦åœ¨ä¸åŒåœºæ™¯ä¸‹è¿è¡Œä¸åŒBean  
@Conditionalåœ¨è¿è¡Œç¯å¢ƒä¸‹å†³å®šBeanæ˜¯å¦è¦åˆ›å»º

## 2.2. ç»„ä»¶æ‰«æ

```java
@Configuration
@ComponentScan //æ‰¾å½“å‰åŒ…ä¸‹åŠ äº†æ³¨è§£çš„ç±»å¹¶å®ä¾‹åŒ–
public class CDPlaterConfig {
	@Bean
	<function>
}
```

- `@ComponentScan` //æ‰¾å½“å‰åŒ…ä¸‹åŠ äº†æ³¨è§£çš„ç±»å¹¶å®ä¾‹åŒ–
	- `basePackages`
		- æ˜¯æ•°ç»„å¯ä»¥å†™å¤šä¸ª
		- ä½†æ˜¯ç±»å‹ä¸å®‰å…¨ï¼Œå†™é”™ç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™
	- `basePackageClasses`
		- ä¹Ÿæ˜¯æ•°ç»„
		- åˆ°ç±»æ‰€åœ¨çš„åŒ…å’Œå­ç›®å½•ä¸‹æœç´¢
		- **ç±»å‹å®‰å…¨**ï¼Œä½†æ— æ³•ä¿è¯ç±»ä¸€ç›´å­˜åœ¨

å½“ä½¿ç”¨Â `@ComponentScan`Â æ³¨è§£æ—¶ï¼ŒSpringä¼šè‡ªåŠ¨æ‰«ææŒ‡å®šåŒ…ä¸‹çš„ç»„ä»¶ï¼Œå¹¶å°†å…¶æ³¨å†Œä¸ºBeanã€‚å¦‚æœä½ åœ¨é…ç½®ç±»ä¸­æ‰‹åŠ¨å®šä¹‰äº†ç›¸åŒçš„Beanï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´é‡å¤å®šä¹‰çš„é—®é¢˜ã€‚

## 2.3. Beanä¸‰ç§æ³¨å…¥æ–¹æ³•ğŸ‘

### 2.3.1. æ„é€ æ–¹æ³•

- åœ¨æ„é€ å‡½æ•°ä¸Šä½¿ç”¨ @Autowired æ³¨è§£ï¼Œç”¨äºè‡ªåŠ¨æ³¨å…¥æ„é€ å‡½æ•°å‚æ•°æ‰€éœ€è¦çš„ Beanã€‚**å¦‚æœæ„é€ å‡½æ•°åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œåˆ™å¯ä»¥çœç•¥ @Autowired æ³¨è§£ã€‚**

```java
@Autowired
public MyService(MyDao myDao) {
    this.myDao = myDao;
}
```

### 2.3.2. setteræ–¹æ³•

```java
public void setOrderRepo(OrderRepository orderRepo) {
    this.orderRepo = orderRepo;
}
```

ä¹Ÿå¯ä»¥åŠ `Autowired`è‡ªåŠ¨æ³¨å…¥.

```java
@Autowired
public void setOrderRepo(OrderRepository orderRepo) {
    this.orderRepo = orderRepo;
}
```

### 2.3.3. å±æ€§å­—æ®µä¸‹åŠ `@Autowired`

```java
@Autowired
private MyBean myBean;
```

# 3. Springé…ç½®æ–¹æ¡ˆğŸ‘

1. è‡ªåŠ¨é…ç½®
2. JavaConfig
3. XMLé…ç½®ï¼ˆæœ€æ—©æœŸï¼‰

![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2023%2F09%2F14%2Fc81a655bf33d1187cac863eabe4a64de_20230914190947.png)  
_SgtPeppersæ˜¯ä¸€å¼ CD_

å»ºè®®åŸºäºæ¥å£ç¼–ç¨‹

## 3.1. è‡ªåŠ¨é…ç½®

1. Component
2. ComponentScan
3. Autowired
4. Configuration


- ç»„ä»¶æ‰«æ component scanning
	- `@Configuration` é…ç½®ç±»
	- `@ComponentScan`
- è‡ªåŠ¨è£…é… autowiring
	- `@Autowired`
	- æ„é€ æ–¹æ³•
	- å­—æ®µ
	- setæ–¹æ³•
	- `required=false`
- éœ€è¦å®ä¾‹åŒ–çš„Beanï¼š`@Component`
	- é»˜è®¤æ˜¯**å•å®ä¾‹æ¨¡å¼**ï¼Œåœ¨Springä¸Šä¸‹æ–‡æ°¸è¿œåªæœ‰ä¸€ä¸ªå®ä¾‹
	- å¯ä»¥**å‚æ•°æŒ‡å®šå¤šå®ä¾‹**

![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2023%2F12%2F31%2F09-55-36-ac898cc2918943f139876a34a27f386c-20231231095536-853b20.png)

## 3.2. JavaConfig

- åº”ç”¨åœºæ™¯ï¼šè‡ªåŠ¨åŒ–é…ç½®è¡Œä¸é€šï¼Œå¦‚ç¬¬ä¸‰æ–¹åº“
- æ³¨è§£
	- `@Configuration`
	- `@Bean(name=â€œ..â€)`
- æ³¨å…¥
	- è°ƒç”¨æ–¹æ³•
	- é€šè¿‡æ–¹æ³•å‚æ•°è‡ªåŠ¨è£…é…ï¼ˆå…¶ä»–é…ç½®ç±»ï¼Œå…¶ä»–æ–¹æ³•åˆ›å»ºçš„Beanï¼‰

åªç”¨äºåˆ›å»ºï¼Œä¸ä¼šæŠŠä¸šåŠ¡é€»è¾‘æ”¾è¿›æ¥ã€‚

![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2023%2F12%2F31%2F09-56-16-0ee4f7052c6e564839b82b9a7d299704-20231231095615-a30d06.png)

## 3.3. XML

äº†è§£å³å¯ã€‚

- æ ¼å¼ï¼š`<beans><bean>`
- **æ— ç±»å‹æ£€æŸ¥**
- æ„é€ å™¨æ³¨å…¥
	- constructor-arg
	- c-å‘½åç©ºé—´
	- æ³¨å…¥å­—é¢é‡å€¼
	- æ³¨å…¥é›†åˆ
- å±æ€§æ³¨å…¥
	- p-å‘½åç©ºé—´
	- util-å‘½åç©ºé—´

å»ºè®®ï¼šå¼ºä¾èµ–ä½¿ç”¨æ„é€ å™¨æ³¨å…¥

![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2023%2F12%2F31%2F09-56-42-38e95d9182eff146ef5bd7df0b88a0a3-20231231095641-816334.png)

## 3.4. æ··åˆé…ç½®

åœ¨æ ¹é…ç½®ç±»ä¸­å¯¼å…¥å…¶ä»–é…ç½®ç±»ã€‚

- JavaConfigå¯¼å…¥
	- `@import(é…ç½®ç±»,class,...)`
	- `@importResource(xmlæ–‡ä»¶)`
- XMLå¯¼å…¥

# 4. åº”ç”¨ä¸Šä¸‹æ–‡

1. AnnotationConfigApplicationContext
	- åŸºäºæ³¨è§£é…ç½®ç”Ÿæˆ
2. ClassPathXmlApplicationContext
3. AnnotationConfigWebApplicationContext
4. FileSystemXmlApplicationContext
5. XmlWebApplicationContext

# 5. Beanä½œç”¨åŸŸ

@Scopeä¸@Componentå’Œ@Beanä¸€èµ·ä½¿ç”¨ï¼ŒæŒ‡å®šä½œç”¨åŸŸ

1. Singletonï¼Œå•ä¾‹ï¼Œæ•´ä¸ªåº”ç”¨ä¹‹åˆ›å»ºä¸€ä¸ªå®ä¾‹
2. Prototypeï¼ŒåŸå‹ï¼Œæ¯æ¬¡æ³¨å…¥æˆ–è€…é€šè¿‡Springåº”ç”¨ä¸Šä¸‹æ–‡è·å–çš„æ—¶å€™ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°beanå®ä¾‹
3. Sessionï¼Œä¼šè¯ï¼Œåœ¨ä¼šè¯èŒƒå›´å†…æœ‰æ•ˆ
4. Requestï¼Œè¯·æ±‚ï¼Œåœ¨Webåº”ç”¨ä¸­ï¼Œä¸ºæ¯ä¸ªè¯·æ±‚åˆ›å»ºä¸€ä¸ªbeanå®ä¾‹

## 5.1. å•ä¾‹

![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2023%2F09%2F21%2Fbcf741e46f28882a4c83561481669afc_20230921185636.png)

é€šè¿‡ä»£ç†æ³¨å…¥ç»™å•ä¾‹å¯¹è±¡

# 6. è¿è¡Œæ—¶æ³¨å…¥å¤–éƒ¨å€¼

1. ä½¿ç”¨`Environment`å±æ€§
2. ä½¿ç”¨`@PropertySource(/path/to/file)`æŒ‡å®šæ–‡ä»¶

## 6.1. Environment.getPropertyçš„å‡ ç§å½¢å¼

- `String getPropertyï¼ˆString key)`
- `String getPropertyï¼ˆString key, String defaultValueï¼‰` 
- `T getPropertyï¼ˆString key, Class typeï¼‰` 
- ` T getPropertyï¼ˆString key, Class type, T defaultValue `ï¼‰

## 6.2. ä½¿ç”¨å ä½ç¬¦

`${...}`

