---
aliases: 
tags: 
categories:
sticky:
thumbnail:
cover: 
excerpt: false
mathjax: true
comment: true
title: 04-架构模式
date:  2024-05-07 14:05
modified:  2024-05-07 15:05
---

解决特定问题的设计决定的集合，但是可以参数化配置。

- DSSA 领域特定软件架构
	1. 面向特定任务(task/domain)
	2. 在这个领域里是通用的
	3. 标准结构
- 架构模式
	1. 把设计决定打包在一起
- 设计模式  
![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2024%2F05%2F07%2F14-09-51-8b4e00572f757ad428e4008f69aa83da-20240507140950-fa7584.png)

- 架构模式分类
	1. Module
	2. Component-Connector
		1. 在Runtime动态建立联系
	3. Allocation

# Layered Pattern

- Module类架构

1. 一个Layer里包含多个Module，不存在跨层的Module
2. 限制层与层之间的依赖关系，质量属性的可修改性策略就使用了分层
3. 各层之间不能跨层调用，只能上面调下面

## Solution

![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2024%2F05%2F07%2F14-16-47-b199ddcbdff99b04e268ba2e7d332b4c-20240507141646-1ef7b2.png)

- 限制
	1. 每个模块只能被分配到一层
	2. 至少有两层
	3. allowed-to-use关系不能是环，低层不能调用高层
- 弱点
	1. 增加层很复杂
	2. 性能

## Pattern

![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2024%2F05%2F07%2F14-18-30-444d6cbeb1cdbf4fa785de6b61092876-20240507141829-67d177.png)

---

如果D是sidecar，那么也是分层；但如果D也有一定业务，则不是分层  
![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2024%2F05%2F07%2F14-25-46-741bf1a29993aa374ab8a6754a9fb3bd-20240507142545-72c020.png)

# Broker Pattern

- Component-Connector类模式

## Solution

![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2024%2F05%2F07%2F14-34-43-2c21c09e9de3e3b8c04404d72a18db01-20240507143442-cee395.png)

- 元素
	1. Client
	2. Server
	3. Broker：中介，帮助client找到server，传递请求
- 分析
	1. 提升了互操作性、可修改性
	2. 现代场景下如果有多个broker实例，可以提高扩展性、安全性、可用性（补充设计）
	3. 可能单点失效，减低性能、安全性、可用性
	4. 减低可测试性，无法预先确定client和server的状态

## Pattern

![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2024%2F05%2F07%2F14-36-41-5112182333c844cc84ff216ca67d7c03-20240507143641-9c99b5.png)

# Model-View-Controller Pattern

从动态看属于Component-Connector  
从开发态看属于Module

## Solution

![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2024%2F05%2F07%2F14-54-35-cc6e1787efc5b7097c73cbb1ae914782-20240507145434-fb3e5b.png)

## Pattern

![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2024%2F05%2F07%2F14-54-49-7e40f48489e84a51c5331bf99eb8f877-20240507145448-7baa06.png)

# Pipe-and-Filter Pattern

Component-Connector

## Solution

![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2024%2F05%2F07%2F14-56-07-9ecaef916b1c000ee9724bf806272c79-20240507145607-deab29.png)

- 元素
	1. pipe
		- 必须有数据的输入和输出
		- 连接一系列的数据处理/计算
	2. filter
		- 通过pipe连起来

- 限制
	1. 系统里不可能只有孤立的pipe

## Pattern

![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2024%2F05%2F07%2F14-57-55-2764955e71cac24cc8a6b8df474c15a6-20240507145754-7b1c94.png)

# Client-Server Pattern

## Solution

![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2024%2F05%2F07%2F14-59-19-36800fe2562f1df5520f11d28f81167d-20240507145918-c888d4.png)

- 元素
	1. Client
	2. Server

- 不需要broker：在有限的网络中，有哪些服务是预先知道的

## Pattern

![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2024%2F05%2F07%2F15-03-13-fe3a35814348e258c7bcbf1c77e4d792-20240507150312-39032f.png)



## Peer-to-Peer Pattern


没有明确的地位差距

## Solution


![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2024%2F05%2F07%2F15-04-53-895cb73111b3ab647bb300595b8a7a2a-20240507150452-821875.png)

peer即可以发送也可以接受数据

hops：限制可感知的范围


## Pattern

![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2024%2F05%2F07%2F15-07-03-98cf5b4315536a76cde2239249b648c1-20240507150702-8ce395.png)




