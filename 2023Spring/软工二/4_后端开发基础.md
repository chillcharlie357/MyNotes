---
title: 4_后端开发基础
tags: 
categories: 
date:  2023-03-03 15:11
modified:  星期二 7日 三月 2023 10:14:26
sticky:
thumbnail:
cover: 
excerpt: false
mathjax: true
comment: true
---

# HTTP协议
计网讲过0.O

## 客户端服务器模式C/S
- 无状态
- client request / server reponse
	- 服务端不会主动发消息

## Tomcat和Servlet
### TomCat
java写的Web服务器，java Servlet容器
- 和HTTP服务器⼀样，绑定IP地址并监听TCP端⼝
- 管理Servlet程序的⽣命周期
- 将URL映射到指定的Servlet进⾏处理
- 与Servlet程序合作处理由Web浏览器发来的HTTP请求：根据HTTP请求⽣成
- HttpServletRequest对象并传递给Servlet进⾏处理，将Servlet中的HttpServletResponse对象⽣成的内容返回给浏览器
![msedge_739_416.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/07/f43f3060ac7c4468779b7e1a81f378ad_msedge_739_416.png)

### Servlet
java写的，交互式浏览和修改数据，生成动态WEb内容

是很多其它框架的核心

#### 生命周期
![msedge_313_275.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/07/689a546f7e9afa807b5782777a92997f_msedge_313_275.png)

1. 到达服务器的 HTTP 请求被委派到 Servlet 容器
2. Servlet 容器在调⽤ service() ⽅法之前加载 Servlet类
3. Servlet 容器处理由多个线程产⽣的多个请求，每个线程执⾏⼀个单⼀的 Servlet 对象的 service() ⽅法，**每个请求都有一个单一线程**

#### service()方法

- service()方法**实际执行任务**的主要方法，由容器调用
	- doGet
	- doPost
	- ...

#### 部署
servlet-mapping把url和不同任务对应


## REST和JSON

### REST风格提出
- REST风格的提出 Roy Fielding博士论文 **67强烈推荐** 。取代了复杂笨重的SOAP，成为Web API的标准
- Representational State Transfer
- 满足各种要求：可重复、分层、无状态、可靠、统一接口、可扩展、可重用
### 特点
- Web API与前后端分离
	- URL返回的不是HTML而是机器直接解析的数据，这个URL就可以看成是⼀个Web API
	- 前端分不同平台（PC,IOS...），后端可以统一
### REST API规范
- REST请求仍然是标准HTTP请求
- 除了GET请求外，POST、PUT等请求的body是JSON数据格式，请求的Content-Type为application/json

### JSON
JSON（JavaScript Object Notation，JavaScript对象表示法，读作/ˈdʒeɪsən/）是⼀种由道格拉斯·克罗克福特构想和设计、轻量级的数据交换语⾔

- 本质上是正则表达式
- JSON的parser是有限状态机
- 数据格式与语言无关


# Spring Boot入门

简化了spring的依赖、构建
本质还是servlet


## hello world
1. 程序入口
	- Spring Boot要求`main() `⽅法所在的启动类必须放到根`package`下，命名不做要求
	- 启动Spring Boot应⽤程序只需要⼀⾏代码加上⼀个注解`@SpringBootApplication`
2. Controller
	- 启动之后，对URL“/”路径的响应是通过`HelloController`类来实现的
		- 需要添加`@RestController`和`@RequestMapping(“/”) `注解来说明。 
		- 如果是其它路径，修改`RequestMapping`注解的参数为对应的路径即可
3. 启动项目和浏览器访问
	- IDE运行`Application`的`main`方法
	- `mvn spring-boot:run`
	- `mvn package`打包成jar包，直接`java -jar`


# 数据设计
数据持久化

关系数据库[[02_数据模型]]

SQL语句查询


### JDBC原理
java Database Connectivity JDBC Java数据库连接



# DAO
DAO 数据存取对象（Data Access Object），把数据库操作封装起来，直接对逻辑对象操作
![msedge_531_239.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/07/03e962f7c41a845316af9a6f741d448e_msedge_531_239.png)

## 优势
- 提供数据访问接口
	- 隔离数据和业务，操作都对逻辑对象
- 隔离不同数据库的实现
	- 提高可扩展性

## 组成部分
- DAO接⼝：
	- 把对数据库的所有操作定义成抽象⽅法，可以提供多种实现
	- 只提供业务需要的接口，而不是直接提供全部接口
- DAO实现类：
	- 针对不同数据库给出DAO接⼝定义⽅法的具体实现
- 实体类：
	- ⽤于存放与传输对象数据
- 数据库连接和关闭⼯具类：
	- 避免了数据库连接和关闭代码的重复使⽤，⽅便修改


## Mysql
最流行的关系数据库

POM文件依赖：

```pom
<!--mysql-->
 <dependency>
 <groupId>mysql</groupId>
 <artifactId>mysql-connector-java</artifactId>
 <scope>runtime</scope>
 </dependency>
```


spring boot application.yml文件
```yml
spring:
 datasource:
 url: jdbc:mysql://localhost:3306/mysql_test
 username: root
 password: root
 driver: com.mysql.jdbc.Drive
```

# Mybatis
- ORM Object Relation Mapping
	- Object->Relation
	- Relation->Object

- Hibernate 
	- 不要写sql，完整ORM
- MyBatis 
	- 要写sql，Relation->Object自主性更好
	- 自动生产调用数据库的代码，执行你写的sql语句
## 安装使用
- 要使⽤ MyBatis， 只需将 mybatis-x.x.x.jar ⽂件置于类路径（classpath）中即可。
- 如果使⽤ Maven 来构建项⽬，则需将下⾯的依赖代码置于 pom.xml ⽂件中：
```xml
<dependency>
<groupid>org.mybatis</groupid>
<artifactId>mybatis</artifactId>
 <version>x.x.x</version>
 </dependency>
```


# Spring Boot + Mybatis项目案例分析
- Spring Boot+Mybatis项⽬的结构：
	- `contoller`:负责处理REST API请求。
	- `bl`：业务逻辑层接⼝。
	- `blImpl`:业务逻辑层实现。
	- `data`：数据层接⼝。
	- `po`：持久化对象，⽤于数据层和逻辑层之间数据传递。
	- `vo`：值对象，⽤于逻辑层和展示层（前端）数据传递。
	- `dataImpl`：数据层实现，Mybatis是XML⽂件。
