---
title: 06_安全性
tags: 2023_Spring数据管理基础 课程
categories: 2023_Spring数据管理基础
date:  2023-03-23 17:11
modified:  星期二 28日 三月 2023 15:13:26
sticky:
thumbnail:
cover: 
excerpt: false
mathjax: true
comment: true
---



- 数据本身
	- 不能一非授权的方式访问
- 数据库软硬件环境安全



# 安全级别



# 存取控制

## 自主存取控制


### SQL授权机制

### 创建数据库模式的权限


### 数据库角色

- **角色**是权限的集合
	- 简化授权的过程
	- 可以为一组具有相同权限的用户创建一个角色

- 角色创建
```sql
CREATE  ROLE  <角色名> 
```

- 角色授权
```sql
GRANT  <权限>[,<权限>]… 
 ON <对象类型>对象名  
 TO <角色>[,<角色>]…
```

- 将一个角色授予其他的角色或用户
```sql
GRANT  <角色1>[,<角色2>]…
TO  <角色3>[,<用户1>]… 
[WITH ADMIN OPTION]
```
指定了`WITH ADMIN OPTION`则获得某种权限的角色或用户还可以把这种权限授予其他角色

- 权限回收
```SQL
REVOKE <权限>[,<权限>]…
ON <对象类型> <对象名>
FROM <角色>[,<角色>]…
```

REVOKE执行者是:
	角色的创建者
	拥有在这个（些）角色上的`ADMIN OPTION`




### 自主存取控制缺点

- 可能存在数据的“无意泄露”
	- 原因：这种机制仅仅通过对数据的存取权限来进行安全控制，而数据本身并无安全性标记
	- 解决：对系统控制下的所有主客体实施强制存取控制策略


## 强制存取控制

- MAC-Mandatory Access Control
	- 每一个数据对象被标以一定的密级
	- 每一个用户也被授予某一个级别的许可证
	- 用户不能直接感知或进行控制,不知道自己有哪些权限
	- 对于任意一个对象，只有具有合法许可证的用户才可以存取

避免了用户全局掌握数据库,没人可以把自己的权限转交给他人


### 实体

- 主体是系统中的活动实体
	 - 数据库管理系统所管理的实际用户
	 - 代表用户的各进程
- 客体是系统中的被动实体，受主体操纵
	 - 文件、基本表、索引、视图

### 敏感度标记

敏感度标记（Label）

- 对于主体和客体，DBMS为它们每个实例（值）指派一个敏感度标记（Label）
- 敏感度标记分成若干级别
	- 绝密（Top Secret，TS）
	- 机密（Secret，S）
	- 可信（Confidential，C）
	- 公开（Public，P）
	- TS>=S>=C>=P

主体的敏感度标记称为**许可证级别（Clearance Level）**
客体的敏感度标记称为**密级（Classification Level）**

### 强制存取控制规则

- 强制存取控制规则
	- 仅当主体的许可证级别<font color="#ff0000">大于</font>或等于客体的密级时，该主体才能<font color="#ff0000">读取</font>相应的客体
	- 仅当主体的许可证级别<font color="#ff0000">小于</font>或等于客体的密级时，该主体才能<font color="#ff0000">写</font>相应的客体

如果数据允许向下写,可能有泄漏风险

标记和数据永远绑定

## DAC + MAC
- 实现强制存取控制时要首先实现自主存取控制
	- 原因：较高安全性级别提供的安全保护要包含较低级别的所有保护

自主存取控制与强制存取控制共同构成数据库管理系统的安全机制，先进行自主存取控制检查，通过自主存取控制检查的数据对象再由系统进行强制存取控制检查，只有通过强制存取控制检查的数据对象方可存取。
![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/28/1d4b90cf6b0b1173ac393222aca5912e_202303281443251.png)

# 视图机制

把要保密的数据对无权存取这些数据的用户隐藏起来，对数据提供一定程度的安全保护 ,
间接地实现支持存取谓词的用户权限定义


# 审计
留下记录

## 功能

- 基本功能
	- 提供多种审计查阅方式
- 多套审计规则：一般在初始化设定
- 提供审计分析和报表功能
- 审计**日志管理功能**
	- 防止审计员误删审计记录，审计日志必须先转储后删除
	- 对转储的审计记录文件提供完整性和保密性保护
	- 只允许审计员查阅和转储审计记录，不允许任何用户新增和修改审计记录等
- 提供查询审计设置及审计记录信息的专门视图

## 级别

用户级

系统级

## 语句
不是标准SQL,不同数据库的标准不同


# 数据加密

## 存储加密

如果文件系统不加密则数据库存取控制也不能保证完全安全

- 透明存储加密
	- 内核级加密保护方式，对用户完全透明
	- 将数据在写到磁盘时对数据进行加密，授权用户读取数据时再对其进行解密
	- 数据库的应用程序不需要做任何修改，只需在创建表语句中说明需加密的字段即可
	- 内核级加密方法: 性能较好，安全完备性较高
- 非透明存储加密
	- 通过多个加密函数实现

## 传输加密


- 链路加密
	- 跳到跳加密
	- 在链路层进行加密
	- 传输信息由报头和报文两部分组成
	- 报文和报头均加密
- 端到端加密
	- 在发送端加密，接收端解密
	- 只加密报文不加密报头
	- 所需密码设备数量相对较少，容易被非法监听者发现并从中获取敏感信息


# 其他安全性保护

- 推理控制
	- 避免用户利用能够访问的数据推知更高密级的数据
	- 如果数据库设计的过于规则,则可以通过已知的推测未知的
- 隐蔽信道
	- 间接数据传递
- 数据隐私保护
	- 描述个人控制其不愿他人知道或他人不便知道的个人数据的能力
	- 范围很广：数据收集、数据存储、数据处理和数据发布等各个阶段

