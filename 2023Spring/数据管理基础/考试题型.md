beijia@nju.edu.cn

# 选择：
15道，30分

1-2道是nosql

第9章优化不考

#  问答：
8道题，40分

讨论理解方面

2道nosql

## 干嘛要noql,与sql关系

1. 内存中的数据结构和关系型数据不匹配，每次处理的过程很麻烦（阻抗失谐）
2. 集成数据库和应用程序数据库的问题（NoSQL是应用程序数据库）
3. 集群问题（让用户自行决定可用性和一致性的平衡）


nosql不使用关系模型、无模式、适合集群。
关系型数据库中，首先必须定义“模式”，然后才能存放数据。

## 4个nosql的基本构造原理、适用环境、优缺点（1/4）

![Cache_da463e367ff1286..jpg](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2023%2F06%2F14%2F822d883b43fe2867d6f9246bea56f62f_Cache_da463e367ff1286..jpg)

### 键值：
有一个简单的哈希表，key和value。应用程序提供key和value，并将其持久化。如果key已经存在，则覆盖。否则新建。

- 适用：
	1. 网络会话
	2. 购物车信息
	3. 用户配置信息
- 不适用
	1. 根据部分值查询数据
	2. 多个操作的事务
	3. 存储多个操作关键字集合
	4. 数据间的关系

- 优点：
	1. 高性能：使用简单的数据结构和索引
	2. 简单易用：数据模型简单
	3. 可扩展性：可以通过分布式存储实现水平扩展
- 缺点：
	1. 功能有限：无法支持复杂的数据查询和处理
	2. 不支持事务
	3. 数据结构固定，无法根据需求动态更改。

### 文档：

一个自述性的文件，分层树状数据结构。文档可以嵌套。可以包含映射表、集合和标量等。

- 适用
	1. 网站分析和实时分析
	2. 内容管理系统与博客
	3. 事件记录
	4. 电子商务程序
- 不适用：
	1. 多个操作的事务
	2. 查询持续变更的聚合

- 优点：
	1. 访问数据更灵活。通过聚合中的字段查询，可以只获取一部分聚合，而不用获取全部内容。
	2. 可以按照聚合内容创建索引。
	3. 文档数据库的文档中无需空属性，若其中不存在某属性，就假定该属性值未设定或与此文档无关。向文档中新增属性时，既无需预先定义，也不用修改已有文档内容。
	4. 性能好。
- 缺点：
	1. 由于文档没有模式，因此在想优化存储并获取聚合中的部分内容时，数据库不太好调整文档结构。
	2. 缺乏统一的查询语法。

### 列族：
有列关键字和映射值，每个值可以分层许多列族，每个列族对应一个数据映射表。

- 适用：
	1. 博客
	2. 网站分析和实时分析
	3. 计数器
	4. 限期
- 不适用：
	1. ACID特性的事务
	2. 返回根据查询结果聚合的数据
	3. 开发早期原型或刚开始试探某个技术方案

- 优点：
	1. 查找速度快。
	2. 可扩展性强，容易进行分布式扩展。
	3. 复杂性低。
- 缺点：
	1. 不支持ACID特性的事务。
	2. 修改查询模式的代价高。

### 图：
有节点和边。节点对应数据实例，有属性。边对应数据实例的关系，有方向，也具有属性。而节点则按关系组织起来，以便在其中查找所需模式。用图将数据一次性组织好，稍后便可根据“关系”以不同方式解读它。

- 适用：
	1. 铁路路线安排
	2. 与位置有关的服务
	3. 信息推荐
	4. 互联数据
- 不适用：
	1. 全图操作
	2. 图数据库在更新全部或某子集内的实体

- 优点：
	1. 灵活。
	2. 支持复杂的图算法。
	3. 可以构建复杂的关系图谱。
- 缺点：
	1. 复杂。
	2. 只能支持一定的数据规模。

# 解答题
 3道题 30分
 
1. 画ER图
2. 给条件写sql语句
3. 规范化