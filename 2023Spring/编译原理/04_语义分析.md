
# 符号表


# 属性文法

## 属性+动作

基本思想：动作嵌入展开式右部，一个动作在它左边的所有文法符号都处理过之后立刻执行


$$
B\rightarrow X\{a\}Y
$$

```java
void B() {
	X
	a // X处理完后执行a
	Y
}
```

Listener无返回值，属性文法可以实现让非终结符有返回值

## 综合属性和继承属性

- 综合属性：依赖自己、子节点，依赖自下而上，把动作放在产生式的最后$A\rightarrow BY\{a\}$
	- 在antlr4中使用返回值传递 
- 继承属性：依赖父节点、兄弟节点(左，右)、自身的属性来定义
	- 在antlr4中使用参数传递


往往在属性结构与树的结构<font color="#ff0000">不匹配</font>时，才会采用继承属性。

antlr4底层会改写左递归，在属性文法中若有参数会改写失败

<font color="#ff0000">依赖图</font>用于确定一棵给定的语法分析树中各个属性实例之间的依赖关系
<font color="#ff0000">信息流向</font>: 先从左向右、从上到下传递信息, 再从下到上传递信息

## 语法制导定义

SDD没有规定以什么方式、顺序计算属性

## S-属性定义

- 如果一个 SDD 的每个属性都是综合属性, 则它是 S 属性定义。

## L-属性定义


## 后缀表示 (Postfix Notation)

1. 如果E是变量或常量，则E的后缀就是E本身。
2. 如果E是形如$E_1 op E_2$的表达式，则E的后缀表示是$E_1^`  E_2^`op$，其中$E_1^` E_2^`$是$E_1 E_2$的后缀表达式。  
3. 如果E是形如$(E_1)$的表达式，则E的后缀表示是$E_1$的后缀表示。



# 类型检查

比较简单

《编程语言实现模式》第八章：静态类型检查

- Offline：先有完整的语法树，再去遍历
	- ParseTreeWalker
- Online：在语法分析树构建的过程中嵌入
	- Attribute Grammar（手动在g4中嵌入）
	-  addParseListener（把语法文件和java文件分开，antlr4自动嵌入）


# 语法制导的翻译方案SDT

例：
	有小数点的二进制数`-101.101`，怎么翻译成十进制？