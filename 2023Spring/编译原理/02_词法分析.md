---
aliases: 
title: 02_è¯æ³•åˆ†æ
tags: 2023_Springç¼–è¯‘åŸç†  è¯¾ç¨‹
categories: 2023_Springç¼–è¯‘åŸç†
date:  Thursday,June 1st 2023
modified:  Thursday,June 22nd 2023
sticky:
thumbnail:
cover: 
excerpt: false
mathjax: true
comment: true
---

 - è¯æ³•åˆ†æå™¨
	- è¾“å…¥ï¼šç¨‹åºæ–‡æœ¬/å­—ç¬¦ä¸² s + è¯æ³•å•å…ƒ (token) çš„è§„çº¦
	- è¾“å‡ºï¼šè¯æ³•å•å…ƒæµ

![NVIDIA_Share_845_318.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/01/0b8af0fabf500f77c5933bf72e3b2360_NVIDIA_Share_845_318.png)

åˆ†ç±»:

- è¯æ³•åˆ†æå™¨ç”Ÿæˆå™¨ï¼ˆæœ€ç®€å•ï¼‰
- æ‰‹å†™è¯æ³•åˆ†æå™¨
	- ç”Ÿäº§ç¯å¢ƒä¸‹ç¼–è¯‘å™¨å¸¸ç”¨ï¼ˆå¦‚gccï¼‰
- è‡ªåŠ¨åŒ–è¯æ³•åˆ†æå™¨(æœ€éš¾)

# 1. è¯æ³•åˆ†æå™¨ç”Ÿæˆå™¨ANTLR

- è¾“å…¥ï¼šè¯æ³•å•å…ƒï¼ˆtokenï¼‰çš„è§„çº¦
- è¾“å‡ºï¼šè¯æ³•åˆ†æå™¨
- **å¦‚ä½•å½¢å¼åŒ–è§„çº¦ï¼Ÿ**
	- æ­£åˆ™è¡¨è¾¾å¼

æœ‰ç©ºçœ‹çœ‹è¿™ä¸ª[C.g4](https://github.com/antlr/grammars-v4/blob/master/c/C.g4)  
	ä¸çŸ¥é“è¯æ³•å•å…ƒæ€ä¹ˆæè¿°ï¼Ÿ

![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/Screenshot%20from%202023-03-06%2012-00-44.png)

## 1.1. ANTLRè¯­æ³•

- å‘éŸ³`|ant-lÉ™r|`
- å°å†™å­—æ¯å¼€å¤´ï¼šæ–‡æ³•
- å¤§å†™å­—æ¯å¼€å¤´ï¼šè¯­æ³•
- ä¼˜å…ˆçº§ï¼š
	- è‹¥æŸå­—ç¬¦ä¸²æ»¡è¶³å¤šä¸ªè§„åˆ™ï¼Œä¼šä¼˜å…ˆæ»¡è¶³å‰ä¸€ä¸ªè§„åˆ™ã€‚**ç‰¹ä¾‹æ”¾åœ¨å‰é¢**
	- çº¦å®šï¼šå­—é¢é‡çš„tokenä¼˜å…ˆçº§é«˜äºç¬¦å·é‡

- è¯æ³•å•å…ƒ
	- å…³é”®å­—
		- åªåŒ…å«è‡ªå·±ï¼Œä¸éœ€è¦æè¿°
	- ç¬¦å·é‡
		- ä¸€ç±»ï¼Œéœ€è¦æè¿°

### 1.1.1. ANTLR v4 ä¸­ä¸¤å¤§å†²çªè§£å†³è§„åˆ™

1. æœ€å‰ä¼˜å…ˆåŒ¹é…: å…³é”®å­— vs. æ ‡è¯†ç¬¦

```g4
BEGIN : 'begin' ;
ID : [a-z]+ ;
```

1. æœ€é•¿ä¼˜å…ˆåŒ¹é…: >=, ifhappy, thenext, 1.23

## 1.2. å‘½ä»¤è¡Œä½¿ç”¨

- alias:
	- `alias grun="java org.antlr.v4.gui.TestRig"`ç”¨äºè°ƒè¯•
	- `alias antlr4="java -jar /usr/local/lib/antlr-4.9.1-complete.jar"`
1. å†™ä¸€ä¸ª`.g4`æ–‡ä»¶
2. åœ¨æ–‡ä»¶ç›®å½•ä¸‹`antlr4 <file>.g4`
3. `javac *.java`
4. `grun <file> <rule> [options]`  
ä¾‹å­ï¼š

```shell
grun SimpleExpr r -tokens
```

## 1.3. ä»¥ç¼–ç¨‹çš„æ–¹å¼ä½¿ç”¨antlr4

ä»¥ç¼–ç¨‹æ–¹å¼ä½¿ç”¨antlr4ç”Ÿæˆçš„xxxLexer.java

1. åœ¨g4æ–‡ä»¶ä¸­å†™`package`è¯­å¥
	- å¦‚æœè¯æ³•è¯­æ³•åˆ†å¼€ï¼Œä¸€èˆ¬å†™åœ¨è¯­æ³•éƒ¨åˆ†

```java
@header{
package simpleexpr
}
```

=>æ‰€æœ‰è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶éƒ½æ”¾åˆ°åŒ…é‡Œ 

headerä¸­æ‰€æœ‰çš„ä»£ç éƒ½ä¼šè¢«æ‹·è´åˆ°ç”Ÿäº§çš„javaæ–‡ä»¶

1. å†™ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶

```java
CharStream input = CharStreams.fromStream(is);
SimpleExprLexer lexer = new SimpleExprLexer(input);//æŠŠè¾“å…¥ç¨‹åºä»¥å­—ç¬¦ä¸²çš„å½¢å¼ä¼ ç»™è¯æ³•åˆ†æå™¨

lexer.getAllTokens().forEach(System.out::println);//lamdaè¡¨è¾¾å¼
```

## 1.4. æŠŠè¯æ³•éƒ¨åˆ†å’Œè¯­æ³•éƒ¨åˆ†åˆ†å¼€

ä¸åŒè¯­è¨€è¯­æ³•éƒ¨åˆ†å„ä¸ç›¸åŒï¼Œè¯æ³•å´å¾ˆç›¸ä¼¼

1. å•ç‹¬å†™ä¸€ä¸ª`g4`æ–‡ä»¶ 

```g4
lexer grammer SimpleExprRules;
```

1. è¯­æ³•éƒ¨åˆ†`import`è¯æ³•éƒ¨åˆ†å³å¯

[grammer-v4] antlr å®˜æ–¹ç»´æŠ¤çš„

## 1.5. å‚è€ƒ

antlr4æƒå¨æŒ‡å—ï¼š

- 5.5ï¼šè¯†åˆ«å¸¸è§çš„è¯­æ³•ç»“æ„
- 15.5ï¼šè¯æ³•è§„åˆ™
- 15.6ï¼šé€šé…ç¬¦ä¸éè´ªå©ªå­è§„åˆ™
- 12ï¼šè¯æ³•åˆ†æå™¨é»‘é­”æ³•ï¼ˆæš‚æ—¶ç”¨ä¸åˆ°ï¼‰ï¼Œè¯æ³•åˆ†æé«˜ç«¯ç”¨æ³•

# 2. æ­£åˆ™è¡¨è¾¾å¼

ä½œç”¨ï¼šè¯æ³•å•å…ƒçš„**å½¢å¼åŒ–è§„çº¦** ã€‚  
æ­£åˆ™è¡¨è¾¾å¼æ˜¯**è¯­æ³•**ï¼Œæ­£åˆ™è¯­è¨€æ˜¯**è¯­ä¹‰**ã€‚

## 2.1. æ¦‚å¿µ

- id:å­—æ¯å¼€å¤´çš„å­—æ¯/æ•°å­—ä¸²
- **å­—æ¯è¡¨**ï¼šå­—æ¯å’Œæ•°å­—ç­‰ç¬¦å·é›†åˆ
- **ä¸²**ï¼šç¬¦å·æ„æˆçš„æœ‰ç©·åºåˆ—ï¼Œå«ç©ºä¸²
- **è¯­è¨€**ï¼šidå®šä¹‰çš„é›†åˆï¼Œå¯æ•°ä¸ªä¸²çš„é›†åˆ
	- ç©ºè¯­è¨€ä¸åªå«æœ‰ç©ºä¸²çš„è¯­è¨€ä¸åŒ 
	- é›†åˆè¿ç®—å¯ä»¥å¾—åˆ°æ–°çš„è¯­è¨€

## 2.2. è¯­è¨€è¿ç®—

å¯ä»¥ä½¿ç”¨é›†åˆè¿ç®—æ„é€ æ–°çš„è¯­è¨€ã€‚

- ä¸²çš„æŒ‡æ•°è¿ç®—
	- $S^0=\epsilon$
	- $S^i=ss^{i-1},i>0$ 
- L Må¹¶ï¼š$L\cup M=\{s | s\in L \vee s\in M\}$ 
- L Mè¿æ¥ï¼š$LM=\{st | s\in L \land t \in M \}$
- Kleeneé—­åŒ…ï¼š $L^*=\cup^{\infty}_{i=0}L^i$
- Lçš„æ­£é—­åŒ…ï¼š$L^+=\cup^{\infty}_{i=1}L^i$

$L^*(L^+)$å…è®¸æˆ‘ä»¬æ„é€ **æ— ç©·**çš„é›†åˆ

## 2.3. æ­£åˆ™è¡¨è¾¾å¼å®šä¹‰

### 2.3.1. è¯­æ³•

ç»™å®šå­—æ¯è¡¨$\Sigma$ï¼Œ$\Sigma$ä¸Šçš„æ­£åˆ™è¡¨è¾¾å¼ç”±ä¸”ä»…ç”±ä»¥ä¸‹è§„åˆ™å®šä¹‰:  
![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2023%2F06%2F22%2Fe15e2a3644bdd8027ec189970575e894_20230622094254.png)

### 2.3.2. è¯­ä¹‰

æ­£åˆ™è¡¨è¾¾å¼å¯¹åº”çš„**æ­£åˆ™è¯­è¨€**ï¼š

![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2023%2F06%2F22%2F4b123166cb6e36fb7a3ac5844298f0fa_20230622094404.png)

## 2.4. æ‰©å±•è¯­æ³•

- `.*`é»˜è®¤è´ªå©ªåŒ¹é…
- `.*?`**éè´ªå©ªåŒ¹é…**
- `~[\n]*`åŒ¹é…é™¤äº†æŸäº›å­—ç¬¦å¤–çš„å…¶ä»–å­—ç¬¦

`.`åœ¨`.g4`ä¸­å¯ä»¥åŒ¹é…ä»»æ„ç¬¦å·ï¼Œä½†åœ¨ä¸€äº›ç‰ˆæœ¬çš„æ­£åˆ™è¡¨è¾¾å¼ä¸­è¡¨ç¤ºé™¤äº†æ¢è¡Œç¬¦ä¹‹å¤–çš„ä»»æ„å­—ç¬¦ 

### 2.4.1. ç‰¹æ®ŠåŒ¹é…

#### 2.4.1.1. åå‘å¼•ç”¨

`<[hH](1-6)>.*?<\/[hH]\1>*`

r1/r2

#### 2.4.1.2. å‰è§†æ–­è¨€

`(?=<expr>)`

`(?=â€¦)`  
å½“Â `â€¦`Â åŒ¹é…æ—¶ï¼ŒåŒ¹é…æˆåŠŸï¼Œä½†ä¸æ¶ˆè€—å­—ç¬¦ä¸²ä¸­çš„ä»»ä½•å­—ç¬¦ã€‚è¿™ä¸ªå«åšÂ _å‰è§†æ–­è¨€_Â ï¼ˆlookahead assertionï¼‰ã€‚

 - `IsaacÂ (?=Asimov)`Â å°†ä¼šåŒ¹é…Â `'IsaacÂ '`Â ï¼Œä»…å½“å…¶åç´§è·ŸÂ `'Asimov'`Â ,ä½†ä¸æ¶ˆè€—`Asimov`
- â€œWindows(?=95|98|NT|2000)â€èƒ½åŒ¹é…â€œWindows2000â€ä¸­çš„â€œWindowsâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€œWindows3.1â€ä¸­çš„â€œWindowsâ€  
[regex101: build, test, and debug regex](https://regex101.com/r/gkX5NX/1)

#### 2.4.1.3. è‚¯å®šå‹åè§†æ–­è¨€

`(?<=<expr>)`

`(?<=â€¦)`

å¦‚æœÂ `...`Â çš„åŒ¹é…å†…å®¹å‡ºç°åœ¨å½“å‰ä½ç½®çš„å·¦ä¾§ï¼Œåˆ™åŒ¹é…ã€‚è¿™å«åšÂ _è‚¯å®šå‹åè§†æ–­è¨€_Â ï¼ˆpositive lookbehind assertionï¼‰ã€‚Â `(?<=abc)def`Â å°†ä¼šåœ¨Â `'abcdef'`Â ä¸­æ‰¾åˆ°ä¸€ä¸ªåŒ¹é…ï¼Œå› ä¸ºåè§†ä¼šå›é€€3ä¸ªå­—ç¬¦å¹¶æ£€æŸ¥å†…éƒ¨è¡¨è¾¾å¼æ˜¯å¦åŒ¹é…ã€‚å†…éƒ¨è¡¨è¾¾å¼ï¼ˆåŒ¹é…çš„å†…å®¹ï¼‰å¿…é¡»æ˜¯å›ºå®šé•¿åº¦çš„ï¼Œæ„æ€å°±æ˜¯Â `abc`Â æˆ–Â `a|b`Â æ˜¯å…è®¸çš„ï¼Œä½†æ˜¯Â `a*`Â å’ŒÂ `a{3,4}`Â ä¸å¯ä»¥ã€‚æ³¨æ„ï¼Œä»¥è‚¯å®šå‹åè§†æ–­è¨€å¼€å¤´çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…é¡¹ä¸€èˆ¬ä¸ä¼šä½äºæœç´¢å­—ç¬¦ä¸²çš„å¼€å¤´ã€‚

- â€œ(?<=95|98|NT|2000)Windowsâ€èƒ½åŒ¹é…â€œ2000Windowsâ€ä¸­çš„â€œWindowsâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€œ3.1Windowsâ€ä¸­çš„â€œWindowsâ€  
[regex101: build, test, and debug regex](https://regex101.com/r/T3ty61/1)  
ã€Šæ­£åˆ™è¡¨è¾¾å¼å¿…çŸ¥å¿…ä¼šã€‹

> è¯·ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å°†ä¸€æ®µæ–‡æœ¬ä¸­æ‰€æœ‰è¿ç»­ä¸¤æ¬¡é‡å¤å‡ºç°çš„å•è¯æ‰¾å‡ºæ¥

1. ä½¿ç”¨åå‘å¼•ç”¨ï¼š

`\b(\w+)\b\s+\b\1\b`

è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼å’Œå‰é¢çš„ä¾‹å­ç±»ä¼¼ï¼Œåªæ˜¯ä½¿ç”¨äº†åå‘å¼•ç”¨æ¥å¼•ç”¨ç¬¬ä¸€ç»„æ•è·åˆ°çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯å‰é¢åŒ¹é…åˆ°çš„å•è¯ã€‚è¿™é‡Œä½¿ç”¨`\1`æ¥å¼•ç”¨ç¬¬ä¸€ç»„æ•è·åˆ°çš„å†…å®¹ã€‚

1. ä½¿ç”¨æ­£å‘å‰è§†æ–­è¨€ï¼š

`\b(\w+)\b(?=\s+\1\b)`

è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨äº†æ­£å‘å‰è§†æ–­è¨€`(?=\s+\1\b)`æ¥åŒ¹é…å•è¯ï¼Œè¯¥æ–­è¨€è¡¨ç¤ºå•è¯åé¢ç´§è·Ÿç€ä¸€ä¸ªæˆ–å¤šä¸ªç©ºç™½å­—ç¬¦å’Œå‰é¢åŒ¹é…åˆ°çš„å•è¯ã€‚è¿™é‡Œä¸éœ€è¦æ•è·ç¬¬ä¸€ç»„å†…å®¹ã€‚

1. ä½¿ç”¨è´Ÿå‘å‰è§†æ–­è¨€ï¼š

`\b(\w+)\b(?!\W)\s+\b\1\b(?!\w)`

### 2.4.2. vimç®€è®°æ³•

![NVIDIA_Share_1167_807.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/01/f8c6620382eb9a86fea34c22c9a4370f_NVIDIA_Share_1167_807.png)

# 3. æ‰‹å†™ä¸€ä¸ªè¯æ³•åˆ†æå™¨

**lookahead**

- è¿‡ç¨‹
	- å‘å‰çœ‹
	- å‘å‰èµ°
	- è°ƒæ•´çŠ¶æ€
	- è®°å½•å…³é”®ç‚¹
	- å¾…æœºå›å¤´

æœ¬è´¨ï¼šä¸æ–­çš„è¯†åˆ«å­—ç¬¦ä¸² 

è¦è®°å½•æœ€åä¸€æ¬¡åˆç†çš„peek,æ–¹ä¾¿å›é€€  
çŠ¶æ€è½¬ç§»æ—¶è¦æºå¸¦ä¿¡æ¯**ä»é‚£ä¸ªçŠ¶æ€æ¥çš„** 

# 4. è‡ªåŠ¨æœºç†è®ºä¸è¯æ³•åˆ†æå™¨ç”Ÿæˆå™¨

æ ¹æ®è¡¨è¾¾/è®¡ç®—èƒ½åŠ›çš„å¼ºå¼±, è‡ªåŠ¨æœºå¯ä»¥åˆ†ä¸ºä¸åŒå±‚æ¬¡

æ­£åˆ™è¡¨è¾¾å¼ã€NFAã€DFAè¡¨è¾¾èƒ½åŠ›ç­‰ä»· ï¼š

![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/Screenshot%20from%202023-03-10%2015-24-59.png)  
	é™¤äº†Kleeneéƒ½æ˜¯Turingå¥–å¾—ä¸»ï¼Œä½†ä»–å¯¼å¸ˆæ˜¯church

## 4.1. NFA

- NFA (Nondeteministic Finite Automaton)
- éç¡®å®šæ€§æœ‰ç©·è‡ªåŠ¨æœº$A=\{\Sigma,S,s_0,\delta,F\}$

### 4.1.1. å®šä¹‰

éç¡®å®šæ€§æœ‰ç©·è‡ªåŠ¨æœº A æ˜¯ä¸€ä¸ªäº”å…ƒç»„ A = (Î£, S, s0, Î´, F):

1. å­—æ¯è¡¨$\Sigma$ï¼ˆ$\epsilon \not\in \Sigma$ï¼‰
2. **æœ‰ç©·**çš„çŠ¶æ€é›†åˆ$S$
3. å”¯ä¸€çš„åˆå§‹çŠ¶æ€$s_0 \in S$
4. çŠ¶æ€è½¬ç§»**å‡½æ•°**$\delta$  
	   $$  
	\delta : S\times (\Sigma \cup \{\epsilon\}\rightarrow 2^S)

	
	$$
5. çŠ¶æ€æ¥å—å‡½æ•°é›†åˆ$F\subseteq S$ 

- **çº¦å®š**: æ‰€æœ‰**æ²¡æœ‰å¯¹åº”å‡ºè¾¹**çš„å­—ç¬¦é»˜è®¤æŒ‡å‘ä¸€ä¸ªä¸å­˜åœ¨çš„ â€œ**ç©ºçŠ¶æ€**â€  
	- ä¸‹å›¾`1`çš„`a`æŒ‡å‘ç©ºçŠ¶æ€

- **éç¡®å®šæ€§**ä½“ç°ï¼š
	- çŠ¶æ€è½¬ç§»æœ‰$2^S$ç§å¯èƒ½ 
	- æ²¡æœ‰å­—ç¬¦è¾“å…¥å³$\epsilon$ï¼Œä¹Ÿå¯ä»¥è‡ªå‘è·‘åˆ°å…¶ä»–çŠ¶æ€

![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/15/c8f6e2bcda06d13e0141e0b1d201fd73_202303151646812.png)

### 4.1.2. è¯­è¨€

- **æ¥å—ï¼ˆAcceptï¼‰**
	- ï¼ˆéç¡®å®šæ€§ï¼‰æœ‰ç©·è‡ªåŠ¨æœº$A$æ¥å—å­—ç¬¦ä¸²$x$ï¼Œå½“ä¸”ä»…å½“å­˜åœ¨ä¸€æ¡ä»å¼€å§‹çŠ¶æ€$s_0$åˆ°æŸä¸ªæ¥å—çŠ¶æ€$f\in F$ã€æ ‡å·ä¸º$x$çš„è·¯å¾„
	- ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²è¾“å…¥ï¼Œå¦‚æœæœ€åå­—ç¬¦ä¸²è€—å°½æ—¶çš„**å¯èƒ½çŠ¶æ€é›†åˆ**ï¼ˆå› ä¸ºæ˜¯ä¸ç¡®å®šçŠ¶æ€æœºï¼‰åŒ…å«æ¥å—çŠ¶æ€ï¼Œåˆ™**æ¥å—**
- **è¯­è¨€$L(A)$**ï¼š
	- èƒ½æ¥å—çš„æ‰€æœ‰å­—ç¬¦ä¸²æ„æˆçš„é›†åˆ
	- è¯­ä¹‰æ˜¯å¦åŒ…å«å†³å®šäº†è‡ªåŠ¨æœºçš„å¼ºå¼± 

### 4.1.3. è‡ªåŠ¨æœºçš„ä¸¤ä¸ªåŸºæœ¬é—®é¢˜

- Membership é—®é¢˜: ç»™å®šå­—ç¬¦ä¸² $x,x\in L(A)$ï¼Ÿ
- $L(A)$ ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ->ç”¨REè¡¨ç¤º

### 4.1.4. ä¾‹å­

![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2023%2F06%2F22%2F6a594e72819e4a8aef4eda698ec88039_20230622100110.png)

## 4.2. DFA

 - **DFA (Deterministic Finite Automaton)**
 - ç¡®å®šæ€§æœ‰ç©·è‡ªåŠ¨æœº$A=\{\Sigma,S,s_0,\delta,F\}$ ,**ä¸‹ä¸€ä¸ªçŠ¶æ€å”¯ä¸€** 

### 4.2.1. å®šä¹‰

- äº”å…ƒç»„ï¼š
1. å­—æ¯è¡¨$\Sigma (\epsilon \notin \Sigma)$  
2. **æœ‰ç©·**çš„çŠ¶æ€é›†åˆ$S$
3. **å”¯ä¸€**çš„åˆå§‹çŠ¶æ€$s_0\in S$
4. çŠ¶æ€è½¬ç§»å‡½æ•°$\delta$

	$$
	\delta:S\times \Sigma \rightarrow S
	
	
	
	
	
	$$

5. æ¥å—çŠ¶æ€é›†åˆ$F\subseteq S$

**çº¦å®š**: æ‰€æœ‰**æ²¡æœ‰å¯¹åº”å‡ºè¾¹**çš„å­—ç¬¦é»˜è®¤æŒ‡å‘ä¸€ä¸ª â€œ**æ­»çŠ¶æ€** â€  

![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/15/5c00471fda62a15e452b1343f808f08a_202303151654956.png)

### 4.2.2. æ— å…³çŠ¶æ€

- æ­»çŠ¶æ€ï¼šä»è¿™ä¸ªçŠ¶æ€æ²¡æœ‰é€šè·¯åˆ°è¾¾ç»“æŸçŠ¶æ€
- å¤šä½™çŠ¶æ€ï¼šä»å¼€å§‹çŠ¶æ€å‡ºå‘ï¼Œä»»ä½•è¾“å…¥ä¸²ä¹Ÿä¸èƒ½åˆ°è¾¾çš„é‚£ä¸ªçŠ¶æ€ã€‚

![image.png](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/image%2F2023%2F06%2F22%2F83d17b6a672988af0cf76a52e774bcfa_20230622131154.png)

### 4.2.3. NFAä¸DFAæ¯”è¾ƒ

NFAæ›´åŠ æ˜“äºç†è§£ ï¼Œä¾¿äºæè¿°L(A)  
DFAæ˜“äºåˆ¤æ–­$x\in L(A)$ ï¼Œé€‚åˆäº§ç”Ÿè¯æ³•åˆ†æå™¨

ç”¨ NFA æè¿°è¯­è¨€, ç”¨ DFA å®ç°è¯æ³•åˆ†æå™¨  
$RE \Rightarrow NFA \Rightarrow DFA \Rightarrow è¯æ³•åˆ†æå™¨$

## 4.3. Thompson æ„é€ æ³•ğŸ‘

**ä»REåˆ°NFA**

- åŸºæœ¬æ€æƒ³: æŒ‰ç»“æ„**å½’çº³**

$$
RE\Rightarrow NFA 
$$

$$
r\Rightarrow N(r)
$$

$$
è¦æ±‚ï¼šL(N(r))=L(r)
$$

### 4.3.1. æ„é€ è¿‡ç¨‹

[[#2.3. æ­£åˆ™è¡¨è¾¾å¼å®šä¹‰]]

1. $\epsilon$æ˜¯æ­£åˆ™è¡¨è¾¾å¼  
   ![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/23/a30171ba6ffffb0addeeafe1235569e0_202303232002793.png)
   
2. $a\in \Sigma$æ˜¯æ­£åˆ™è¡¨è¾¾å¼  
   ![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/23/0779e60e635cfc9d8a96a92d33ff364d_202303232003583.png)
   
3. å¦‚æœ s æ˜¯æ­£åˆ™è¡¨è¾¾å¼, åˆ™ $(s)$æ˜¯æ­£åˆ™è¡¨è¾¾å¼ã€‚N((s))=N(s)
4. å¦‚æœ s, t æ˜¯æ­£åˆ™è¡¨è¾¾å¼, åˆ™ $s | t$æ˜¯æ­£åˆ™è¡¨è¾¾å¼
   - æ ¹æ®å½’çº³å‡è®¾, N(s) ä¸ N(t) çš„å¼€å§‹çŠ¶æ€ä¸æ¥å—çŠ¶æ€å‡å”¯ä¸€->ä¸€è¾¹æ„é€ ä¸€è¾¹è¯æ˜

   ![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/23/80f8203a81da100181bb4af99bfd81db_202303232003936.png)

5. å¦‚æœ s, t æ˜¯æ­£åˆ™è¡¨è¾¾å¼, åˆ™ $st$ æ˜¯æ­£åˆ™è¡¨è¾¾å¼ã€‚
   - æ ¹æ®å½’çº³å‡è®¾, N(s) ä¸ N(t) çš„å¼€å§‹çŠ¶æ€ä¸æ¥å—çŠ¶æ€å‡å”¯ä¸€
   - æ‹¼æ¥æ—¶,sç»ˆæ­¢ä¸tåˆå§‹çœ‹æˆä¸€ä¸ªçŠ¶æ€

   ![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/23/bda825a674820f4e1c9d6bbb9d29ea59_202303232005245.png)

6. å¦‚æœ s æ˜¯æ­£åˆ™è¡¨è¾¾å¼, åˆ™ $s^*$ æ˜¯æ­£åˆ™è¡¨è¾¾å¼ã€‚
   - æ ¹æ®å½’çº³å‡è®¾, N(s) çš„å¼€å§‹çŠ¶æ€ä¸æ¥å—çŠ¶æ€å”¯ä¸€ã€‚

![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/23/19931155b0c67cca623b13e549b902e4_202303232006685.png)

### 4.3.2. æ­£åˆ™è¡¨è¾¾å¼å®šä¹‰

ç»™å®šå­—æ¯è¡¨$\Sigma$ï¼Œ$\Sigma$ä¸Šçš„æ­£åˆ™è¡¨è¾¾å¼**ç”±ä¸”ä»…ç”±**ä»¥ä¸‹è§„åˆ™å®šä¹‰:

1. $\epsilon$æ˜¯æ­£åˆ™è¡¨è¾¾å¼
2. $\forall a\in \Sigma$,$a$æ˜¯æ­£åˆ™è¡¨è¾¾å¼
3. å¦‚æœ$s$æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ™$(s)$ä¹Ÿæ˜¯æ­£åˆ™è¡¨è¾¾å¼
4. å¦‚æœ$s$ä¸$t$æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ™$s|t,st,s^*$ä¹Ÿæ˜¯æ­£åˆ™è¡¨è¾¾å¼

### 4.3.3. N(r)æ€§è´¨å’ŒThompsonæ„é€ æ³•å¤æ‚åº¦åˆ†æ

1. N(r)çš„å¼€å§‹çŠ¶æ€ä¸æ¥å—çŠ¶æ€å‡å”¯ä¸€ã€‚
2. å¼€å§‹çŠ¶æ€æ²¡æœ‰å…¥è¾¹, æ¥å—çŠ¶æ€æ²¡æœ‰å‡ºè¾¹ã€‚
3. N(r) çš„çŠ¶æ€æ•° $|S|\le 2\times |r|$ã€‚ ($|r|$ï¼š$r$ ä¸­è¿ç®—ç¬¦ä¸è¿ç®—åˆ†é‡çš„æ€»å’Œ)
   - æ¯æ¬¡æ„é€ æœ€å¤šåŠ ä¸€ä¸ªèµ·ç‚¹,ä¸€ä¸ªç»ˆç‚¹
4. æ¯ä¸ªçŠ¶æ€æœ€å¤šæœ‰ä¸¤ä¸ª $\epsilon$å…¥è¾¹ä¸ä¸¤ä¸ª $\epsilon$å‡ºè¾¹ã€‚
5. $\forall a\in \Sigma$, æ¯ä¸ªçŠ¶æ€æœ€å¤šæœ‰ä¸€ä¸ª $a$å…¥è¾¹ä¸ä¸€ä¸ª $a$å‡ºè¾¹ã€‚

### 4.3.4. è€ƒè¯•é¢˜å‹

ç»™çŠ¶æ€å›¾ï¼Œå†™å‡ºæ­£åˆ™è¡¨è¾¾å¼ã€‚

![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/15/fa57e9b623e68a4a644f6c81b5fe86a9_202303151702081.png)

## 4.4. å­é›†æ„é€ æ³•ğŸ‘

- Subset/Powerset Construction
- NFAåˆ°DFAçš„è½¬æ¢ï¼Œç”¨DFAæ¨¡æ‹ŸNFA

æœ€å·®æƒ…å†µå¯èƒ½æ˜¯æŒ‡æ•°çº§ï¼Œä½†å®é™…å¾ˆå°‘

$$
NFA\Rightarrow DFA
$$

$$
N\Rightarrow D
$$

$$
è¦æ±‚ï¼šL(D)=L(N)
$$

### 4.4.1. ä¾‹å­

![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/15/dbefdcb026e7db3ea51b5c3587bc932f_202303151710594.png)  
![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/15/e59885671e16d569ce7894f7f806ed52_202303151710382.png)

 NFAçŠ¶æ€çš„å­é›†åŒ…å«ç»“æŸçŠ¶æ€åˆ™å®ƒå°±æ˜¯DFAçš„**ç»“æŸçŠ¶æ€**ã€‚  
 **åˆå§‹çŠ¶æ€é›†åˆ**ä¸ºä»$start$å¼€å§‹ï¼Œé€šè¿‡$\epsilon$è½¬ç§»å¯ä»¥åˆ°è¾¾çš„çŠ¶æ€ã€‚

### 4.4.2. åŸç†

- $\epsilon$é—­åŒ…  
 ![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/15/aeb4be4dcac3ff82eb4793d8503800dc_202303151720063.png)  
- å­é›†æ„é€ æ³•åŸç†:  
 ![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/15/a1f6f4abb78548c1daf8d831689094aa_202303151720768.png)

### 4.4.3. é—­åŒ…

- $f-closure(T)$ï¼š
	- åœ¨åˆå§‹é›†åˆ$T$ä¸Šåš
	- ç”±$f$å†³å®šåšä»€ä¹ˆ

- æ›´å½¢è±¡çš„ç†è§£ï¼šæ¯ä¸€æ¬¡$f$è¿ç®—éƒ½ä¼šä½¿å¾—æ–°çš„é›†åˆå˜å¤§ï¼Œç›´åˆ°æ‰¾åˆ°**ä¸åŠ¨ç‚¹**ã€‚

![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/15/20d1094c98706fc853c5db9b136a465a_202303151724017.png)

æ€è€ƒï¼šæŠŠä¸–ç•Œåœ°å›¾æ‰”åˆ°åœ°ä¸Šï¼Œä¸€å®šä¼šå­˜åœ¨ä¸€ä¸ªç°å®ä¸­çš„ç‚¹ä¸åœ°å›¾ä¸Šçš„ä½ç½®é‡åˆï¼Ÿ

## 4.5. DFAæœ€å°åŒ–ç®—æ³•ğŸ‘

- **åŸºæœ¬æ€æƒ³**ï¼šç­‰ä»·çš„çŠ¶æ€é›†åˆå¯ä»¥åˆå¹¶

- æ­£å‘ï¼š
	- ä¸æ–­**åˆå¹¶**ç­‰ä»·çš„çŠ¶æ€ï¼ŒçŸ¥é“æ— æ³•åˆå¹¶ä¸ºæ­¢
	- ä½†è¿™æ˜¯ä¸€ä¸ªé€’å½’å®šä¹‰ï¼Œæœ€åˆçš„ç­‰ä»·å…³ç³»ä»å“ªé‡Œæ¥ï¼Ÿ

$$
s\sim t\iff \forall a\in \Sigma.((s\stackrel{a}{\rightarrow}s^{'}\land(t\stackrel{a}{\rightarrow}t^{'}))\Rightarrow (s^{'}\sim t^{'})
$$

- **åå‘**ï¼š
	- åˆ’åˆ†ç­‰ä»·é›†åˆï¼Œç›´åˆ°æ— æ³•å†ç»§ç»­åˆ’åˆ†ï¼ˆ<font color="#ff0000">åˆ’åˆ†è€Œéåˆå¹¶</font>ï¼‰
	- å¤©ç„¶å°±æœ‰**åˆå§‹åˆ’åˆ†**ï¼šæ¥å—çŠ¶æ€ä¸éæ¥å—çŠ¶æ€å¿…å®šä¸ç­‰ä»·ï¼Œç©ºä¸²$\epsilon$åŒºåˆ†ä¸¤ç§çŠ¶æ€

$$
s\nsim t\iff \exists a\in \Sigma.((s\stackrel{a}{\rightarrow}s^{'}\land(t\stackrel{a}{\rightarrow}t^{'}))\land (s^{'}\nsim t^{'})
$$

åˆå§‹åˆ’åˆ†ï¼š$\Pi =\{F,S \backslash F\}$,$\epsilon$åŒºåˆ†ä¸¤ç§çŠ¶æ€ã€‚

é€šè¿‡ç¬¦å·

### 4.5.1. ç®—æ³•

**è¦å…ˆæ£€æŸ¥æ˜¯å¦éœ€è¦è¡¥ â€œæ­»çŠ¶æ€â€** (ä¸è¡¥å……å¯èƒ½æœ‰é—®é¢˜)

![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/15/4bdaf3d9a485a0e6171de984cc4a2b89_202303151751571.png)

- åˆå¹¶åä¸€å®šè¿˜æ˜¯DFAå—ï¼Ÿ
	- ä¸€å®šæ˜¯çš„ã€‚åˆå¹¶åèŠ‚ç‚¹åœ¨æŸä¸ªå­—ç¬¦é©±åŠ¨ä¸‹æŒ‡å‘çš„çŠ¶æ€ä¹Ÿç­‰ä»·ï¼Œè‹¥æœ‰å¤šä¸ªçŠ¶æ€ä¹Ÿä¼šåˆå¹¶ã€‚

### 4.5.2. ä¾‹å­

![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/15/94a7489d389daeb2a8760592e45cc9b2_202303151752104.png)  
$\Pi_0 = \{\{A,B,C,D\},\{E\}\}$  
$\Pi_1=\{\{A,B,C\},\{D\},\{E\}\}$  
$\Pi_2=\{\{A,C\},\{B\},\{D\},\{E\}\}$  
$\Pi_3=\Pi_2=\Pi_{\text{final}}$

## 4.6. DFA$\Rightarrow$ è¯æ³•åˆ†æå™¨

### 4.6.1. åŒ¹é…åŸåˆ™

- æœ€å‰ä¼˜å…ˆåŒ¹é…ï¼šå…³é”®å­—
- æœ€é•¿ä¼˜å…ˆåŒ¹é…

### 4.6.2. ä¾‹å­

- æœ‰3ä¸ªRE  
a  
abb  
a\*b+

- æ ¹æ®æ­£åˆ™è¡¨è¾¾å¼æ„é€ ç›¸åº”çš„ NFA  
![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/15/217b1b222ca35b58152cdf5247066eb7_202303151928455.png)

- åˆå¹¶è¿™ä¸‰ä¸ª NFA, æ„é€  a|abb|a \*b+ å¯¹åº”çš„ NFA

![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/15/70e53ded2c0a8001d1ea749b3f311345_202303151929348.png)

- **å­é›†æ„é€ æ³•**å°† NFA è½¬åŒ–ä¸ºç­‰ä»·çš„ DFA (å¹¶æ¶ˆé™¤ â€œæ­»çŠ¶æ€â€)
	- è¦ä¿ç•™å„ä¸ª NFA çš„<font color="#ff0000">æ¥å—çŠ¶æ€</font>ä¿¡æ¯, å¹¶é‡‡ç”¨<font color="#ff0000">æœ€å‰ä¼˜å…ˆåŒ¹é…</font>åŸåˆ™
	- éœ€è¦<font color="#ff0000">æ¶ˆé™¤ â€œæ­»çŠ¶æ€â€</font>, é¿å…è¯æ³•åˆ†æå™¨å¾’åŠ³æ¶ˆè€—è¾“å…¥æµ
		- å¦‚æœä¸æ¶ˆé™¤ï¼Œä¼šè€—å°½è¾“å…¥æµæ‰€æœ‰å­—ç¬¦æ‰å‘ç°é”™è¯¯ã€‚æ­¤æ—¶åœ¨å›é€€åˆ°æ²¡æœ‰å‡ºé”™çš„çŠ¶æ€ä»£ä»·å¾ˆå¤§ã€‚

![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/15/2600c7233f9d4154a45cd49e005bd20c_202303151931010.png)

- æ¨¡æ‹Ÿè¿è¡Œè¯¥ DFA, **ç›´åˆ°æ— æ³•ç»§ç»­ä¸ºæ­¢** (è¾“å…¥ç»“æŸæˆ–çŠ¶æ€æ— è½¬ç§»); å‡è®¾æ­¤æ—¶çŠ¶æ€ä¸º s
	- è‹¥ s ä¸º**æ¥å—çŠ¶æ€**, åˆ™è¯†åˆ«æˆåŠŸ;
	- å¦åˆ™, **å›æº¯** (åŒ…æ‹¬çŠ¶æ€ä¸è¾“å…¥æµ) è‡³æœ€è¿‘ä¸€æ¬¡ç»è¿‡çš„æ¥å—çŠ¶æ€, è¯†åˆ«æˆåŠŸ; 
		- è‹¥æ²¡æœ‰ç»è¿‡ä»»ä½•æ¥å—çŠ¶æ€, åˆ™**æŠ¥é”™** (å¿½ç•¥ç¬¬ä¸€ä¸ªå­—ç¬¦)
- æ— è®ºæˆåŠŸè¿˜æ˜¯å¤±è´¥, éƒ½ä»**åˆå§‹çŠ¶æ€**å¼€å§‹ç»§ç»­è¯†åˆ«ä¸‹ä¸€ä¸ªè¯æ³•å•å…ƒ

![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/15/55ec62f3e109f377c01a3119abf117e7_202303151938938.png)

- ç‰¹å®šäºè¯æ³•åˆ†æå™¨çš„ **DFA æœ€å°åŒ–æ–¹æ³•**
	- åˆå§‹åˆ’åˆ†éœ€è¦è€ƒè™‘ä¸åŒè¯æ³•å•å…ƒï¼ˆæ¥å—çŠ¶æ€ï¼‰ï¼Œæ¯”ä¼ ç»Ÿçš„åˆ’åˆ†æ›´ç²¾ç»†

![](https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/03/15/11a98ce49b799c1ea6ada872b64c90a9_202303151940375.png)

## 4.7. kleeneæ„é€ æ³•

$$
DFA\Rightarrow RE
$$

$$
D\Rightarrow r
$$

$$
\text{è¦æ±‚ï¼š}L(r)=L(D)
$$
