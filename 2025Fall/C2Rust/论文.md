---
aliases: 
tags: 
categories:
sticky:
thumbnail:
cover: 
excerpt: false
mathjax: true
comment: true
title: 论文
date:  2025-09-10 17:09
modified:  2025-09-10 17:09
---

# LLM-Driven Multi-step Translation from C to Rust using Static Analysis

## 流程

- 流程
	1. 任务划分
	2. 代码转译
		1. 先生成unsafe代码，然后用LLM修改为safe代码

### Unidiomatic代码生成

C2Rust： 只做变量类型转换，用LLM处理全局变量和函数  
C parser: 提取依赖信息，作为LLM的上下文信息

### Idiomatic代码生成

重点在于处理指针和其他unsafe blocks，用rust types代替

Crown：分析指针

### 验证

Unidiomatic代码验证

Idiomatic代码验证

反馈机制

## 代码架构


### 整体架构

输入C代码 → 预处理 → C解析 → 依赖分析 → 翻译 → 组合 → 验证 → 输出Rust代码

### ThirdParty


对c2rust，crown，rustfmt工具做python封装



```mermaid
stateDiagram-v2  
[*] --> Init  
Init --> ValidateConfig: 验证测试命令/依赖  
ValidateConfig --> PreprocessC: 预处理C源码  
PreprocessC --> DivideAndOrder: 解析/划分/依赖排序  
DivideAndOrder --> C2RustTranslate: C2Rust抽取初始翻译  
  
C2RustTranslate --> UnidiomaticTranslation  
  
state UnidiomaticTranslation {  
[*] --> Translating  
Translating --> Translating: 逐个struct/function按依赖可用翻译  
Translating --> Failed: 任一步失败  
Translating --> Done: 全部成功  
Failed --> [*]  
Done --> [*]  
}  
  
UnidiomaticTranslation --> UnidiomaticCombine: 合并非惯用代码  
UnidiomaticCombine --> Failed: 合并失败  
UnidiomaticCombine --> IdiomaticFlow: [unidiomatic_only == false]  
UnidiomaticCombine --> Success: [unidiomatic_only == true]  
  
state IdiomaticFlow {  
[*] --> CrownAnalyze: 代码语义分析(Crown)  
CrownAnalyze --> IdiomaticTranslation  
  
state IdiomaticTranslation {  
[*] --> Translating  
Translating --> Translating: 逐个struct/function按依赖可用翻译  
Translating --> Failed: 任一步失败  
Translating --> Done: 全部成功  
Failed --> [*]  
Done --> [*]  
}  
  
IdiomaticTranslation --> IdiomaticCombine: 合并惯用代码  
IdiomaticCombine --> Failed: 合并失败  
IdiomaticCombine --> Success  
}  
  
Failed --> ExitFailure: 记录统计/失败信息  
Success --> ExitSuccess: 记录统计  
ExitFailure --> [*]  
ExitSuccess --> [*]
```

